% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bysite.R
\name{aqs_sampledata_by_site}
\alias{aqs_sampledata_by_site}
\title{aqs_sampledata_by_site}
\usage{
aqs_sampledata_by_site(
  parameter,
  bdate,
  edate,
  stateFIPS,
  countycode,
  sitenum,
  duration = NA_character_,
  cbdate = NA_Date_,
  cedate = NA_Date_,
  return_header = FALSE
)
}
\arguments{
\item{parameter}{a character list or a single character string
which represents the parameter code of the air
pollutant related to the data being requested.}

\item{bdate}{a R date object which represents that begin date of the data
selection. Only data on or after this date will be returned.}

\item{edate}{a R date object which represents that end date of the data
selection. Only data on or before this date will be returned.}

\item{stateFIPS}{a R character object which represents the 2 digit state
FIPS code (with leading zero) for the state being
requested. @seealso \code{\link[=aqs_states]{aqs_states()}} for the list of
available FIPS codes.}

\item{countycode}{a R character object which represents the 3 digit state
FIPS code for the county being requested (with leading
zero(s)). @seealso \code{\link[=aqs_counties_by_state]{aqs_counties_by_state()}} for the
list of available county codes for each state.}

\item{sitenum}{a R character object which represents the 4 digit site number
(with leading zeros) within the county and state being
requested.}

\item{duration}{an optional R character string that represents the
parameter duration code that limits returned data
to a specific sample duration. The default value of
NA_character_ results in no filtering based on
duration code.Valid durations include actual sample
durations and not calculated durations such as 8
hour CO or $O_3$ rolling averages, 3/6 day PM
averages or Pb 3 month rolling averages.
@seealso \code{\link[=aqs_sampledurations]{aqs_sampledurations()}} for a list of all
available duration codes.}

\item{cbdate}{a R date object which represents a "beginning
date of last change" that indicates when the data was last
updated. cbdate is used to filter data based on the change
date. Only data that changed on or after this date will be
returned. This is an optional variable which defaults
to NA_Date_.}

\item{cedate}{a R date object which represents an "end
date of last change" that indicates when the data was last
updated. cedate is used to filter data based on the change
date. Only data that changed on or before this date will be
returned. This is an optional variable which defaults
to NA_Date_.}

\item{return_header}{If FALSE (default) returns a single data frame with the
data requested. If TRUE returns a AQSAPI_v2 object
which is a two item list that contains header
information returned from the API server mostly used
for debugging purposes in addition to the data
requested. This is mostly useful for debugging
purposes, in case the user wishes to see the header
information from each api call.}
}
\value{
a tibble or an AQS_Data_Mart_APIv2 S3 object containing sample data
for a single site with the input parameter. An AQS_Data Mart_APIv2
is a 2 item named list in which the first item /(/$Header/) is a
tibble of header information from the AQS API and the second item
/(/$Data/) is a tibble of the data returned.
}
\description{
\lifecycle{stable}
Returns multiple years of data where sample data is
aggregated at the site level. If return_header is
FALSE (default) returns a single data frame with
the requested data. If return_header is TRUE returns a list
of AQSAPI_v2 objects where each index of the list is an
individual RAQSAPI_v2 object returned from each successive
calls to the AQS API. RAQSAPI_v2 objects are two item list
where the $Data portion contains data that contains
sample air monitoring data at a site with the input
parameter, stateFIPS and county_code provided for
bdate - edate time frame. The $Header is a tibble of
header information from the API call /(useful for
debugging/).  Returns NULL is bdate > edate.
}
\note{
The AQS API only allows for a single year of sampledata to be retrieved
at a time. This function conveniently extracts date information from
the bdate and edate parameters then makes repeated calls to the
AQSAPI retrieving a maximum of one calendar year of data at a time.
Each calendar year of data requires a separate API call so multiple
years of data will require multiple API calls. As the number of years
of data being requested increases so does the length of time that it
will take to retrieve results. There is also a 5 second wait
time inserted between successive API calls to prevent overloading the
API server. This operation has a linear run time of
/(Big O notation: O/(n + 5 seconds/)/).
}
\examples{
#Returns a table of ozone monitoring data for the Millbrook School
          # site (/#0014) in Wake County, NC for June 18, 2017.
 \dontrun{
            aqs_sampledata_by_site(parameter = "44201",
                                   bdate = as.Date("20170618",
                                                   format = "\%Y\%m\%d"),
                                   edate = as.Date("20190618",
                                                      format = "\%Y\%m\%d"),
                                   stateFIPS = "37",
                                   countycode = "183",
                                   sitenum = "0014"
                                   )
         }
}
\seealso{
Other Aggregate _by_site functions: 
\code{\link{aqs_annualsummary_by_site}()},
\code{\link{aqs_dailysummary_by_site}()},
\code{\link{aqs_monitors_by_site}()},
\code{\link{aqs_qa_annualperformanceeval_by_site}()},
\code{\link{aqs_qa_annualperformanceevaltransaction_by_county}()},
\code{\link{aqs_qa_annualperformanceevaltransaction_by_site}()},
\code{\link{aqs_qa_blanks_by_site}()},
\code{\link{aqs_qa_collocated_assessments_by_site}()},
\code{\link{aqs_qa_flowrateaudit_by_site}()},
\code{\link{aqs_qa_flowrateverification_by_site}()},
\code{\link{aqs_qa_one_point_qc_by_site}()},
\code{\link{aqs_qa_pep_audit_by_site}()},
\code{\link{aqs_services_by_site}()},
\code{\link{aqs_transactionsample_by_site}()}
}
\concept{Aggregate _by_site functions}
